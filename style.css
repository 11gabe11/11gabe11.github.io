/* ===== The Wandering Pigeon — dark / chrome / gold ===== */
* { box-sizing: border-box; }
:root{
  /* palette */
  --bg:#0b0b0b; --surface:#121212; --chrome-1:#2a2a2a; --chrome-2:#3a3a3a;
  --fg:#e9e9e9; --muted:#a9a9a9; --gold-1:#e6c35a; --ring:#f2d277;

  /* bubble tuning */
  --bubble-vmin:16vmin;         /* bubble diameter; try 14vmin for smaller */
  --film-intensity:0.14;        /* iridescent film strength */
  --rim-intensity:0.38;         /* edge rim strength */
  --sheen-speed:26s;            /* film rotation speed */
}

html,body{height:100%}
html{overflow:hidden}
body{
  margin:0; background:var(--bg); color:var(--fg);
  font:16px/1.55 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
  display:grid; place-items:center;
}

/* ===== Full-screen stage ===== */
.frame{
  width:100vw; height:100vh; position:relative; overflow:hidden;
  background:linear-gradient(180deg,var(--surface),#0f0f0f);
  border:1px solid var(--chrome-1);
  box-shadow:0 16px 40px rgba(0,0,0,.35) inset;
}
.stage{ position:relative; width:100%; height:100%; overflow:hidden; }

/* ===== Portal pages (subpages) ===== */
.portal-body{ margin:0; background:var(--bg); color:var(--fg);
  font:16px/1.6 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
}
.portal-content{ max-width:900px; margin:32px auto; padding:0 16px 56px; }
.back-link{
  display:inline-block; margin:12px 0; color:var(--muted); text-decoration:none;
  border:1px solid var(--chrome-1); padding:6px 10px; border-radius:8px;
}
.back-link:hover{ border-color:var(--chrome-2); color:#cfcfcf; }
.lede{ color:#c7c7c7; }
.info-card{
  background:linear-gradient(180deg,#131313,#101010);
  border:1px solid var(--chrome-1); border-radius:14px; padding:18px; margin:16px 0;
  box-shadow:0 8px 24px rgba(0,0,0,.28), 0 1px 0 rgba(255,255,255,.04) inset;
}
.artist-theme h1,.agent-theme h1,.booker-theme h1,.punter-theme h1{ color:var(--gold-1); }
table{ width:100%; border-collapse:collapse; } th,td{ border:1px solid var(--chrome-1); padding:10px 12px; }
thead th{ background:#151515; }
a{ color:var(--gold-1); } a:hover{ color:#ffe09a; }
::selection{ background:rgba(230,195,90,.28); color:#fff; }

/* ===== Floating, iridescent bubbles ===== */
/* size with vmin so they’re perfect circles on any screen */
.bubble{
  position:absolute; z-index:5; pointer-events:auto;
  width:var(--bubble-vmin); height:auto; aspect-ratio:1/1; border-radius:50%; overflow:hidden;
  display:grid; place-items:center; text-decoration:none; color:var(--fg);
  font-weight:700; letter-spacing:.06em; text-transform:uppercase;
  text-shadow:0 1px 0 rgba(0,0,0,.45), 0 0 12px rgba(230,195,90,.14);

  /* glass body */
  background:
    radial-gradient(130% 130% at 35% 25%, rgba(255,255,255,.10), transparent 45%),
    radial-gradient(85% 90% at 55% 70%, rgba(0,0,0,.32), transparent 60%),
    linear-gradient(180deg,#1b1b1b,#0e0e0e);
  border:1px solid rgba(255,255,255,.08);
  box-shadow:
    0 14px 36px rgba(0,0,0,.42),
    0 1px 0 rgba(255,255,255,.05) inset,
    0 -10px 22px rgba(230,195,90,.05) inset;
}

/* iridescent film (inside only) */
.bubble::before{
  content:""; position:absolute; inset:-6%; border-radius:50%; z-index:-1;
  pointer-events:none; mix-blend-mode:screen; filter:blur(12px);
  animation:bubble-film-spin var(--sheen-speed) linear infinite;
  background:
    conic-gradient(from 0deg,
      rgba(255,180,80, calc(var(--film-intensity) * .95)) 0deg,
      rgba(80,200,255,  calc(var(--film-intensity) * .85)) 50deg,
      rgba(255,95,210,  calc(var(--film-intensity) * .85)) 110deg,
      rgba(90,255,200,  calc(var(--film-intensity) * .75)) 170deg,
      rgba(255,230,120, calc(var(--film-intensity) * .85)) 220deg,
      rgba(180,130,255, calc(var(--film-intensity) * .75)) 280deg,
      transparent 320deg),
    radial-gradient(115% 115% at 28% 22%, rgba(255,255,255,.16), transparent 42%),
    radial-gradient(115% 115% at 70% 78%, rgba(255,255,255,.08), transparent 50%);
}
@keyframes bubble-film-spin { to{ transform:rotate(360deg); } }

/* rim light at the edge (no outside halo) */
.bubble::after{
  content:""; position:absolute; inset:0; border-radius:50%; z-index:-1; pointer-events:none;
  -webkit-mask:radial-gradient(closest-side, transparent 63%, black 70%);
          mask:radial-gradient(closest-side, transparent 63%, black 70%);
  background:
    conic-gradient(from 100deg,
      rgba(255,255,255,.22),
      rgba(255,255,255,0) 20%,
      rgba(230,195,90, var(--rim-intensity)) 35%,
      rgba(255,255,255,.18) 55%,
      rgba(180,120,40, calc(var(--rim-intensity) * .65)) 75%,
      rgba(255,255,255,.10) 90%,
      transparent 100%);
  mix-blend-mode:screen; filter:blur(4px);
}

/* focus/hover: subtle lift without extra halo */
.bubble:hover::before,.bubble:focus-visible::before{ filter:blur(11px) brightness(1.06); }
.bubble:hover::after,.bubble:focus-visible::after  { filter:blur(4px)  brightness(1.08); }
.bubble:focus-visible{ outline:none; box-shadow:0 0 0 2px var(--bg), 0 0 0 3px var(--ring); }

/* small phones: slightly smaller bubbles */
@media (max-width:420px){ :root{ --bubble-vmin:14vmin; } }

/* ===== Custom cursor — The Wandering Pigeon (desktop only) ===== */
@media (pointer: fine) { html, body, *, a, button, .bubble { cursor: none !important; } }
/* wings use these IDs & shoulder joint */
#wp-cursor svg #wp-wing-R, #wp-cursor svg #wp-wing-L { transform-origin: 48px 40px; }


#wp-cursor{
  position:fixed; left:0; top:0; z-index:9999; pointer-events:none;
  width:clamp(28px,3.6vmin,40px); height:auto;
  transform:translate3d(-9999px,-9999px,0);
  filter:drop-shadow(0 1px 0 rgba(255,255,255,.05)) drop-shadow(0 8px 18px rgba(0,0,0,.35));
}
/* Realistic homing-pigeon flap */
@keyframes wp-flap-R {
  0%   { transform: rotate(18deg); }     /* wide open (downstroke) */
  30%  { transform: rotate(-46deg); }    /* fast upstroke */
  60%  { transform: rotate(-40deg); }    /* brief top hold */
  100% { transform: rotate(18deg); }     /* slower downstroke */
}
@keyframes wp-flap-L {
  0%   { transform: rotate(-18deg); }
  30%  { transform: rotate(46deg); }
  60%  { transform: rotate(40deg); }
  100% { transform: rotate(-18deg); }
}

/* shoulder joint in the new SVG's viewBox */
#wp-cursor svg #wp-wing-R { transform-origin: 48px 40px; animation: wp-flap-R 720ms ease-in-out infinite; }
#wp-cursor svg #wp-wing-L { transform-origin: 48px 40px; animation: wp-flap-L 720ms ease-in-out infinite; }

/* subtle body bob */
@keyframes wp-body-bob { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-0.6px) } }
#wp-cursor svg { animation: wp-body-bob 720ms ease-in-out infinite; }

@media (prefers-reduced-motion: reduce){
  #wp-cursor svg, #wp-cursor svg #wp-wing-R, #wp-cursor svg #wp-wing-L { animation:none; }
}

}

/* Hide native cursor absolutely everywhere on precise pointers */
@media (pointer: fine) {
  html, body, *, a, button, .bubble { cursor: none !important; }
}

/* Ensure the custom cursor is always clickable-safe and on top */
#wp-cursor {
  pointer-events: none;
  z-index: 9999;
}

/* ===== Pigeon GLIDE & BURST modes ===== */

/* small oscillation with wings mostly open */
@keyframes wp-glide-R { 0%,100% { transform: rotate(6deg) } 50% { transform: rotate(0deg) } }
@keyframes wp-glide-L { 0%,100% { transform: rotate(-6deg) } 50% { transform: rotate(0deg) } }

/* bigger amplitude, faster tempo (burst of flaps) */
@keyframes wp-burst-R { 0% { transform: rotate(22deg) } 30% { transform: rotate(-52deg) } 60% { transform: rotate(-40deg) } 100% { transform: rotate(22deg) } }
@keyframes wp-burst-L { 0% { transform: rotate(-22deg) } 30% { transform: rotate(52deg) } 60% { transform: rotate(40deg) } 100% { transform: rotate(-22deg) } }

/* body bob for life */
@keyframes wp-body-glide { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-0.4px) } }
@keyframes wp-body-burst { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-1.2px) } }

/* default: you already animate with wp-flap-R/L in your cursor section.
   GLIDE overrides those when .cursor--glide is on #wp-cursor */
#wp-cursor.cursor--glide svg #wp-wing-R { animation: wp-glide-R 1600ms ease-in-out infinite !important; transform-origin: 48px 40px; }
#wp-cursor.cursor--glide svg #wp-wing-L { animation: wp-glide-L 1600ms ease-in-out infinite !important; transform-origin: 48px 40px; }
#wp-cursor.cursor--glide svg            { animation: wp-body-glide 1600ms ease-in-out infinite !important; }

/* when a short burst is triggered, we use faster, bigger flaps for ~700ms */
#wp-cursor.cursor--burst svg #wp-wing-R { animation: wp-burst-R 700ms ease-in-out infinite !important; }
#wp-cursor.cursor--burst svg #wp-wing-L { animation: wp-burst-L 700ms ease-in-out infinite !important; }
#wp-cursor.cursor--burst svg            { animation: wp-body-burst 700ms ease-in-out infinite !important; }

/* ===== Swoop transition ===== */
body.leaving .bubble { opacity: .12; transition: opacity .35s ease, transform .35s ease; }
body.leaving .bubble._clicked { opacity: 1; transform: scale(1.05); }

/* accessibility: if user prefers reduced motion, skip animations */
@media (prefers-reduced-motion: reduce) {
  #wp-cursor.cursor--glide svg,
  #wp-cursor.cursor--glide svg #wp-wing-R,
  #wp-cursor.cursor--glide svg #wp-wing-L,
  #wp-cursor.cursor--burst svg,
  #wp-cursor.cursor--burst svg #wp-wing-R,
  #wp-cursor.cursor--burst svg #wp-wing-L {
    animation: none !important;
  }
}
